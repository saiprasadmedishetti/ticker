(this.webpackJsonpticker=this.webpackJsonpticker||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c,r=n(0),o=n.n(r),i=n(5),s=n.n(i),a=(n(10),n(2)),u=n(4),d=n(1);var l=function(e){var t=e.price,n=e.height,o=e.width,i=Object(r.useState)([]),s=Object(a.a)(i,2),l=s[0],h=s[1],b=Object(r.useRef)(),f=Object(r.useRef)();return Object(r.useEffect)((function(){return fetch("https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=USD&limit=40").then((function(e){return e.json()})).then((function(e){return h(e.Data.Data)})),f.current=Object(u.b)(b.current,{width:o,height:n,layout:{backgroundColor:"#253248",textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"#334158"},horzLines:{color:"#334158"}},crosshair:{mode:u.a.Normal},priceScale:{borderColor:"#485c7b"},timeScale:{borderColor:"#485c7b"}}),c=f.current.addCandlestickSeries({upColor:"#4bffb5",downColor:"#ff4976",borderDownColor:"#ff4976",borderUpColor:"#4bffb5",wickDownColor:"#838ca1",wickUpColor:"#838ca1"}),function(){f.current.remove()}}),[]),Object(r.useEffect)((function(){c.setData(l),f.current.timeScale().fitContent()}),[l]),Object(r.useEffect)((function(){if(c&&t){var e=t.time,n=t.close,r=l[l.length-1],o=new Date(Number(e)).toLocaleDateString().split("/").reverse().join("-");c.update({time:o,open:r.open,high:Math.max(r.high,n),low:Math.min(r.low,n),close:n})}}),[t,c]),Object(d.jsx)("div",{ref:b})},h="BTC-USD";var b=function(){var e,t,n=Object(r.useRef)(),c=Object(r.useRef)(),o=Object(r.useState)(),i=Object(a.a)(o,2),s=i[0],u=i[1],b=Object(r.useState)(""),f=Object(a.a)(b,2),p=f[0],m=f[1];return Object(r.useEffect)((function(){n.current=new WebSocket("wss://stream.coinmarketcap.com/price/latest"),window.matchMedia("(max-width: 580px)").matches&&(c.current.style.height=window.innerHeight+"px")}),[]),Object(r.useEffect)((function(){return n&&(n.current.onopen=function(){n.current.send(JSON.stringify({method:"subscribe",id:"price",data:{cryptoIds:[1],index:"detail"}})),n.current.onmessage=function(e){var t=JSON.parse(e.data);t&&(u((function(e){return e&&(e.close<t.d.cr.p?m("up"):m("down")),{time:t.d.t,close:t.d.cr.p,pc24h:t.d.cr.p24h}})),document.title="BTC-USD | "+t.d.cr.p)}}),function(){n.current.onclose=function(){n.current.send(JSON.stringify({action:"SubRemove",subs:["24~CCCAGG~BTC~USD~m"]}))}}}),[n]),Object(d.jsxs)("main",{className:"container",ref:c,children:[(null===s||void 0===s?void 0:s.close)&&Object(d.jsxs)("div",{className:"block",children:[Object(d.jsxs)("h4",{className:"ticker",children:[h,(null===s||void 0===s?void 0:s.pc24h)&&Object(d.jsxs)("small",{className:"badge\n                ".concat(s.pc24h.toString().includes("-")?"down":s.pc24h.toString().includes("+")?"up":"","\n                "),children:[Number(s.pc24h).toFixed(2),"%"]})]}),Object(d.jsx)("h2",{className:"price ".concat("up"===p?"up":"down"===p?"down":""),children:"$ "+Number(s.close).toFixed(2)})]}),Object(d.jsx)(l,{price:s,height:(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.clientHeight)||window.innerHeight,width:(null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.clientWidth)||window.innerWidth})]})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))};s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),f()}},[[12,1,2]]]);
//# sourceMappingURL=main.4ba473d9.chunk.js.map