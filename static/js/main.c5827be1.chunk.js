(this.webpackJsonpticker=this.webpackJsonpticker||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c,r=n(0),o=n.n(r),i=n(5),s=n.n(i),u=(n(10),n(2)),a=n(4),f=n(1);var b=function(e){var t=e.price,n=e.height,o=e.width,i=Object(r.useState)([]),s=Object(u.a)(i,2),b=s[0],l=s[1],d=Object(r.useRef)(),h=Object(r.useRef)();return Object(r.useEffect)((function(){}),[]),Object(r.useEffect)((function(){return fetch("https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=USD&limit=100").then((function(e){return e.json()})).then((function(e){return l(e.Data.Data)})),h.current=Object(a.b)(d.current,{width:o,height:n,layout:{backgroundColor:"#253248",textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"#334158"},horzLines:{color:"#334158"}},crosshair:{mode:a.a.Normal},priceScale:{borderColor:"#485c7b"},timeScale:{borderColor:"#485c7b"}}),c=h.current.addCandlestickSeries({upColor:"#4bffb5",downColor:"#ff4976",borderDownColor:"#ff4976",borderUpColor:"#4bffb5",wickDownColor:"#838ca1",wickUpColor:"#838ca1"}),function(){h.current.remove()}}),[]),Object(r.useEffect)((function(){c.setData(b),h.current.timeScale().fitContent()}),[b]),Object(r.useEffect)((function(){if(c&&t){var e=t.time,n=t.open,r=t.high,o=t.low,i=t.close,s=new Date(1e3*Number(e)).toLocaleDateString().split("/").reverse().join("-");c.update({time:s,open:n,high:r,low:o,close:i})}}),[t,c]),Object(f.jsx)("div",{ref:d})};var l=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useState)(),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(""),a=Object(u.a)(s,2),l=a[0],d=a[1],h=Object(r.useState)(""),j=Object(u.a)(h,2),m=j[0],p=j[1];return Object(r.useEffect)((function(){e.current=new WebSocket("wss://streamer.cryptocompare.com/v2?format=streamer"),window.matchMedia("(max-width: 580px)").matches&&(t.current.style.height=window.innerHeight+"px")}),[]),Object(r.useEffect)((function(){return e&&(e.current.onopen=function(){e.current.send(JSON.stringify({action:"SubAdd",subs:["24~CCCAGG~BTC~USD~m"]})),e.current.onmessage=function(e){var t=e.data.split("~");"24"===t[0]&&(i((function(e){return e&&(e<t[10]?d("up"):d("down")),{time:t[4],open:t[7],high:t[8],low:t[9],close:t[10]}})),m||p(t[2]+"/"+t[3]),document.title=t[2]+"-"+t[3]+" | "+t[10])}}),function(){e.current.onclose=function(){e.current.send(JSON.stringify({action:"SubRemove",subs:["24~CCCAGG~BTC~USD~m"]}))}}}),[e]),Object(f.jsxs)("main",{className:"container",ref:t,children:[o&&o.close&&Object(f.jsxs)("div",{className:"block",children:[Object(f.jsx)("h4",{className:"ticker",children:m}),Object(f.jsx)("h2",{className:"price ".concat("up"===l?"up":"down"===l?"down":""),children:"$ "+Number(o.close).toFixed(2)})]}),Object(f.jsx)(b,{price:o,height:t&&t.current&&t.current.clientHeight||window.innerHeight,width:t&&t.current&&t.current.clientWidth||window.innerWidth})]})},d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))};s.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(l,{})}),document.getElementById("root")),d()}},[[12,1,2]]]);
//# sourceMappingURL=main.c5827be1.chunk.js.map