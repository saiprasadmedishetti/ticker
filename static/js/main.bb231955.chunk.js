(this.webpackJsonpticker=this.webpackJsonpticker||[]).push([[0],{10:function(e,t,o){},12:function(e,t,o){"use strict";o.r(t);var n,c,i=o(0),r=o.n(i),a=o(5),l=o.n(a),u=(o(10),o(2)),s=o(4),d=o(1);var m=function(e){var t=e.price,o=e.height,r=e.width,a=e.history,l=Object(i.useRef)(),u=Object(i.useRef)();return Object(i.useEffect)((function(){return u.current=Object(s.b)(l.current,{width:r,height:o,layout:{backgroundColor:"#253248",textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"#334158"},horzLines:{color:"#334158"}},crosshair:{mode:s.a.Normal},priceScale:{borderColor:"#485c7b"},timeScale:{borderColor:"#485c7b"}}),n=u.current.addCandlestickSeries({upColor:"#4bffb5",downColor:"#ff4976",borderDownColor:"#ff4976",borderUpColor:"#4bffb5",wickDownColor:"#838ca1",wickUpColor:"#838ca1"}),c=u.current.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.8,bottom:0}}),function(){u.current.remove()}}),[]),Object(i.useEffect)((function(){n.setData(a);var e=a.map((function(e,t,o){var n;return{time:e.time,value:e.volumeto,color:(null===(n=o[t+1])||void 0===n?void 0:n.volumeto)<e.volumeto?"#009688cc":"#ff5252cc"}}));c.setData(e),u.current.timeScale().fitContent()}),[a.length]),Object(i.useEffect)((function(){if(n&&t){var e=t.time,o=t.close,i=t.volume,r=a[a.length-1],l=function(e){return new Date(Number(e)).toLocaleDateString().split("/").reverse().join("-")}(e);n.update({time:l,open:r.open,high:Math.max(r.high,o),low:Math.min(r.low,o),close:o}),c.update({time:l,value:i})}}),[t,n]),Object(d.jsx)("div",{ref:l})},h="BTC-USD";var b=function(){var e,t,o=Object(i.useRef)(),n=Object(i.useRef)(),c=Object(i.useState)([]),r=Object(u.a)(c,2),a=r[0],l=r[1],s=Object(i.useState)(),b=Object(u.a)(s,2),f=b[0],v=b[1],p=Object(i.useState)(""),j=Object(u.a)(p,2),g=j[0],w=j[1];return Object(i.useEffect)((function(){o.current=new WebSocket("wss://perpetual.coinex.com/"),window.matchMedia("(max-width: 580px)").matches&&(n.current.style.height=window.innerHeight+"px")}),[]),Object(i.useEffect)((function(){fetch("https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=USD&limit=60").then((function(e){return e.json()})).then((function(e){var t=e.Data.Data[e.Data.Data.length-1];l(e.Data.Data),v({time:1e3*t.time,close:t.close,open:t.open,high:t.high,low:t.low,volume:t.volumeto,amount:"0"})}))}),[]),Object(i.useEffect)((function(){return o&&(o.current.onopen=function(){o.current.send(JSON.stringify({id:5,method:"kline.subscribe",params:["BTCUSD",60]})),o.current.onmessage=function(e){var t=JSON.parse(e.data);if(t&&"kline.update"===t.method){var o=t.params[0];v((function(e){return e&&(e.close<o[2]?w("up"):w("down")),{time:1e3*o[0],close:o[2],open:o[1],high:o[3],low:o[4],volume:Number(a[(null===a||void 0===a?void 0:a.length)-1].volumeto||0)+Number(o[5]),amount:o[6]}})),document.title="BTC-USD | "+Number(o[2]).toFixed(2)}}}),function(){o.current.onclose=function(){o.current.send(JSON.stringify({id:5,method:"kline.unsubscribe",params:["BTCUSD",60]}))}}}),[o,a]),Object(d.jsxs)("main",{className:"container",ref:n,children:[(null===f||void 0===f?void 0:f.close)&&Object(d.jsxs)("div",{className:"block",children:[Object(d.jsxs)("h4",{className:"ticker",children:[h,(null===f||void 0===f?void 0:f.pc24h)&&Object(d.jsxs)("small",{className:"badge\n                ".concat(f.pc24h.toString().includes("-")?"down":f.pc24h.toString().includes("+")?"up":"","\n                "),children:[Number(f.pc24h).toFixed(2),"%"]})]}),Object(d.jsx)("h2",{className:"price ".concat("up"===g?"up":"down"===g?"down":""),children:"$ "+Number(f.close).toFixed(2)}),Object(d.jsx)("div",{className:"label-row",children:(null===f||void 0===f?void 0:f.volume)&&Object(d.jsxs)("small",{className:"badge",children:["Vol: ",Number(f.volume).toFixed(0)]})}),Object(d.jsx)("div",{className:"label-row",children:(null===f||void 0===f?void 0:f.amount)&&Object(d.jsxs)("small",{className:"badge",children:["Amount: ",Number(f.amount).toFixed(4)]})})]}),Object(d.jsx)(m,{price:f,height:(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.clientHeight)||window.innerHeight,width:(null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.clientWidth)||window.innerWidth,history:a})]})},f=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,13)).then((function(t){var o=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;o(e),n(e),c(e),i(e),r(e)}))};l.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),f()}},[[12,1,2]]]);
//# sourceMappingURL=main.bb231955.chunk.js.map