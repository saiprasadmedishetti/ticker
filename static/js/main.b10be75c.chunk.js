(this.webpackJsonpticker=this.webpackJsonpticker||[]).push([[0],{10:function(e,t,c){},12:function(e,t,c){"use strict";c.r(t);var n,o,r=c(0),i=c.n(r),a=c(5),s=c.n(a),u=(c(10),c(2)),l=c(4),d=c(1);var b=function(e){var t=e.price,c=e.height,i=e.width,a=e.history,s=Object(r.useRef)(),u=Object(r.useRef)();return Object(r.useEffect)((function(){return u.current=Object(l.b)(s.current,{width:i,height:c,layout:{backgroundColor:"#253248",textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"#334158"},horzLines:{color:"#334158"}},crosshair:{mode:l.a.Normal},priceScale:{borderColor:"#485c7b"},timeScale:{borderColor:"#485c7b"}}),n=u.current.addCandlestickSeries({upColor:"#4bffb5",downColor:"#ff4976",borderDownColor:"#ff4976",borderUpColor:"#4bffb5",wickDownColor:"#838ca1",wickUpColor:"#838ca1"}),o=u.current.addHistogramSeries({color:"#26a69a",priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.8,bottom:0}}),function(){u.current.remove()}}),[]),Object(r.useEffect)((function(){n.setData(a);var e=a.map((function(e,t,c){var n;return{time:e.time,value:e.volumeto,color:(null===(n=c[t+1])||void 0===n?void 0:n.volumeto)<e.volumeto?"#009688cc":"#ff5252cc"}}));o.setData(e),u.current.timeScale().fitContent()}),[a.length]),Object(r.useEffect)((function(){if(n&&t){var e=t.time,c=t.close,r=t.volume,i=a[a.length-1],s=function(e){return new Date(Number(e)).toLocaleDateString().split("/").reverse().join("-")}(e);n.update({time:s,open:i.open,high:Math.max(i.high,c),low:Math.min(i.low,c),close:c}),o.update({time:s,value:r})}}),[t,n]),Object(d.jsx)("div",{ref:s})},h="BTC-USD";var m=function(){var e,t,c=Object(r.useRef)(),n=Object(r.useRef)(),o=Object(r.useState)([]),i=Object(u.a)(o,2),a=i[0],s=i[1],l=Object(r.useState)(),m=Object(u.a)(l,2),f=m[0],p=m[1],v=Object(r.useState)(""),j=Object(u.a)(v,2),O=j[0],g=j[1];return Object(r.useEffect)((function(){c.current=new WebSocket("wss://stream.coinmarketcap.com/price/latest"),window.matchMedia("(max-width: 580px)").matches&&(n.current.style.height=window.innerHeight+"px")}),[]),Object(r.useEffect)((function(){fetch("https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=USD&limit=60").then((function(e){return e.json()})).then((function(e){s(e.Data.Data)}))}),[]),Object(r.useEffect)((function(){return c&&(c.current.onopen=function(){c.current.send(JSON.stringify({method:"subscribe",id:"price",data:{cryptoIds:[1],index:"detail"}})),c.current.onmessage=function(e){var t=JSON.parse(e.data);t&&(p((function(e){return e&&(e.close<t.d.cr.p?g("up"):g("down")),{time:t.d.t,close:t.d.cr.p,pc24h:t.d.cr.p24h,volume:t.d.cr.v}})),document.title="BTC-USD | "+Number(t.d.cr.p).toFixed(2))}}),function(){c.current.onclose=function(){c.current.send(JSON.stringify({method:"unsubscribe",id:"price",data:{cryptoIds:[1],index:"detail"}}))}}}),[c]),Object(d.jsxs)("main",{className:"container",ref:n,children:[(null===f||void 0===f?void 0:f.close)&&Object(d.jsxs)("div",{className:"block",children:[Object(d.jsxs)("h4",{className:"ticker",children:[h,(null===f||void 0===f?void 0:f.pc24h)&&Object(d.jsxs)("small",{className:"badge\n                ".concat(f.pc24h.toString().includes("-")?"down":f.pc24h.toString().includes("+")?"up":"","\n                "),children:[Number(f.pc24h).toFixed(2),"%"]})]}),Object(d.jsx)("h2",{className:"price ".concat("up"===O?"up":"down"===O?"down":""),children:"$ "+Number(f.close).toFixed(2)}),Object(d.jsx)("div",{className:"label-row",children:(null===f||void 0===f?void 0:f.volume)&&Object(d.jsxs)("small",{className:"badge",children:["Vol: ",Number(f.volume).toFixed(2)]})})]}),Object(d.jsx)(b,{price:f,height:(null===n||void 0===n||null===(e=n.current)||void 0===e?void 0:e.clientHeight)||window.innerHeight,width:(null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.clientWidth)||window.innerWidth,history:a})]})},f=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,13)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),n(e),o(e),r(e),i(e)}))};s.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root")),f()}},[[12,1,2]]]);
//# sourceMappingURL=main.b10be75c.chunk.js.map